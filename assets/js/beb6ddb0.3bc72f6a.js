"use strict";(self.webpackChunk_dev_lambda_api_template_doc=self.webpackChunk_dev_lambda_api_template_doc||[]).push([[961],{876:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(2784);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=a,f=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},448:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7896),a=(n(2784),n(876));const o={sidebar_position:1},i="npm scripts",l={unversionedId:"contribute/npm-scripts",id:"contribute/npm-scripts",title:"npm scripts",description:"This project is organised in a monorepo structure (see the Project structure section for more details).",source:"@site/docs/contribute/npm-scripts.md",sourceDirName:"contribute",slug:"/contribute/npm-scripts",permalink:"/api-template/docs/contribute/npm-scripts",draft:!1,editUrl:"https://github.com/dev-lambda/api-template/edit/main/website/docs/contribute/npm-scripts.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"5 min to get up and running",permalink:"/api-template/docs/contribute/getting-started"},next:{title:"Project structure",permalink:"/api-template/docs/contribute/structure"}},s={},p=[{value:"Production build and run",id:"production-build-and-run",level:2},{value:"Local development",id:"local-development",level:2},{value:"Tests",id:"tests",level:2},{value:"Linter",id:"linter",level:2},{value:"Documentation",id:"documentation",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"npm-scripts"},(0,a.kt)("inlineCode",{parentName:"h1"},"npm")," scripts"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"This project is organised in a monorepo structure (see the ",(0,a.kt)("a",{parentName:"p",href:"./structure"},"Project structure")," section for more details)."),(0,a.kt)("p",{parentName:"admonition"},"Unless explicitly noted, all listed npm scripts below are either shortcuts to run the equivalent scripts in all workspaces simultaneously (test, build, clean, lint) or to run the main api server (run, watch).")),(0,a.kt)("h2",{id:"production-build-and-run"},"Production build and run"),(0,a.kt)("p",null,"Transpile sources into plain javascript code for production use. Excludes source maps and tests."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run build\n")),(0,a.kt)("p",null,"Clean generated code."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run clean\n")),(0,a.kt)("p",null,"Start the server from the transpiled sources."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run prod\n")),(0,a.kt)("p",null,"Actual production equivalent may use additional environment variables (see ",(0,a.kt)("a",{parentName:"p",href:"./runtime#environment-variables"},"environment variables")," and ",(0,a.kt)("a",{parentName:"p",href:"./deployment"},"deployment")," for more)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"NODE_ENV=production PORT=80 npm run prod\n")),(0,a.kt)("h2",{id:"local-development"},"Local development"),(0,a.kt)("p",null,"Runs the server from typescript sources"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm start\n")),(0,a.kt)("p",null,"Auto-reload run exposing a websocket for debugging with developper tools."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run watch\n")),(0,a.kt)("p",null,"In order to fine tune reload options see ",(0,a.kt)("inlineCode",{parentName:"p"},"nodemon.json")," settings."),(0,a.kt)("h2",{id:"tests"},"Tests"),(0,a.kt)("p",null,"Run the full test suite (from typescript sources) including coverage analysis"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm test\n")),(0,a.kt)("p",null,"Continuous (auto-reloading) test runs."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run test:watch\n")),(0,a.kt)("p",null,"For detailed test setup see ",(0,a.kt)("inlineCode",{parentName:"p"},"jest.config.ts")," file."),(0,a.kt)("h2",{id:"linter"},"Linter"),(0,a.kt)("p",null,"Checks code syntax conventions. Used for CI."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run lint\n")),(0,a.kt)("h2",{id:"documentation"},"Documentation"),(0,a.kt)("p",null,"Generates an Open API specificatin file from api jsdoc comments into ",(0,a.kt)("inlineCode",{parentName:"p"},"website/openapi.json"),". Used for documentation website generation."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run dumpApiSpec\n")),(0,a.kt)("p",null,"Launch the documentation server in development mode"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm run doc\n")))}d.isMDXComponent=!0}}]);